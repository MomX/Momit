<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Use Momit • Momit</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Use Momit">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Momit</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Momit-from.html">Develop new from_ functions</a>
    </li>
    <li>
      <a href="../articles/Momit-usage.html">Use Momit</a>
    </li>
    <li>
      <a href="../articles/mom-definition.html">`.mom` file format definition</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MomX/Momit">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Use Momit</h1>
                        <h4 class="author">Vincent Bonhomme</h4>
            
            <h4 class="date">2018-06-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MomX/Momit/blob/master/vignettes/Momit-usage.Rmd"><code>vignettes/Momit-usage.Rmd</code></a></small>
      <div class="hidden name"><code>Momit-usage.Rmd</code></div>

    </div>

    
    
<div id="general-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#general-workflow" class="anchor"></a>General workflow</h2>
<pre><code>                     character        mod_df        character

files  +--&gt; harvest() +----&gt; from_*() +----&gt; to_*()  +----&gt;   files</code></pre>
<p><em>classes above functions indicates the R zone, otherwise we talk about files on your machine.</em></p>
<ol style="list-style-type: decimal">
<li>You have morphometric data</li>
<li>
<code>from_*()</code> find, read and parse them to a <code>mom_df</code> <code>data.frame</code>
</li>
<li>
<code>to_*()</code> translate them to the format you want</li>
<li>
<code>write_*</code> export these files.</li>
</ol>
<p>The only mandatory part below is <code>from_*</code>, in the case where you would only like to import <code>{.mom, .tps, .nts, etc.}</code> files into R (no convert, no export). See the first example below.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<ul>
<li><p>You have <code>.mom</code> files in the folder “data”, and want to import them into R:<br><code><a href="../reference/from.html">from_mom("data")</a></code></p></li>
<li><p>Same but wih <code>.tps</code>files and you want to collate them into a single <code>.mom</code> file:<br><code>from_tps() %&gt;% to_mom() %&gt;% write_single()</code></p></li>
<li><p>You have thousands of outlines of the same object, spread accross a messy (or neat) subfolders structures. Outlines coordinates represent two views (say lateral and dorsal), and saved as <code>.mom</code> files with the appropriate cofactor (say <code>view dorsal</code>) and you only want the dorsal outlines to be imported in Momocs:<br><code>harvest(your_list_of_messy_folders_where_files_are) %&gt;% from_mom() %&gt;% filter(view=="dorsal") %&gt;% to_Out()</code></p></li>
</ul>
<p>Talking about pipes, all <a href="https://github.com/MomX">MomX</a> packages use them intensively, so you may want to read <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">magrittr’s vignette</a></p>
<p>Of course, <code>from_</code> and <code>to_</code> functions are easy to add to convert from/to any file format. An example will be given in a dedicated vignette. So far, Momit has the following functions:</p>
<p><strong>TODO</strong> <!-- `from_tps` and `to_tps` --> <!-- `from_nts` and `to_nps` --></p>
</div>
<div id="behind-the-curtain" class="section level2">
<h2 class="hasAnchor">
<a href="#behind-the-curtain" class="anchor"></a>Behind the curtain</h2>
<p>We will follow all the thing that happen along the path schematized above. You do not really need to understand (or even read) this section if you just want to convert your files. But in case you need to custom something, here is the long story.</p>
<p>Let’s create a <code>.mom</code> file from scratch. It contains four individuals with some coordinates (we don’t care whether they are outlines, curves, landmarks, etc. here they’re truncated anyway) and four covariates: <code>var</code>iety, <code>domes</code>tication status, <code>view</code>, <code>ind</code>ividual name and <code>size</code>.</p>
<p>We first load Momit (that re-exports magrittr’s pipe), then we write the lines below in a dedicated folder to simulate such a file.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(Momit)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">dir.create</span>(<span class="st">"mom_files"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">"~0001-cPastor_O10VD</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">var Pastor</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">domes cult</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">view VD</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">ind O10</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="st">size 2.23</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">-0.5000 0.00000</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">-0.4967 0.01035</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">-0.4935 0.02414</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">~0001-cPastor_O10VL </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="st">var Pastor</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="st">domes cult</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">view VL</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">ind O10</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="st">size 2.43</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="st">-0.5000 0.00000</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="st">-0.4995 0.01018</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="st">-0.4957 0.02022</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="st">~0001-cIvorra_O11VL </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="st">var Ivorra</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="st">domes wild</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="st">view VL</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="st">ind O11</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="st">size 2.56</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="st">-0.5000 0.00000</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="st">-0.4985 0.0112</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="st">-0.4845 0.021</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="st">~0001-cIvorra_O11VD </span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="st">var Ivorra</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="st">domes wild</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="st">view VD</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="st">ind O11</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="st">size 2.74</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="st">-0.5000 0.00000</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="st">-0.4995 0.011</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="st">-0.49 0.0198"</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">writeLines</span>(<span class="st">"mom_files/foo.mom"</span>)</a></code></pre></div>
<p>We can now read this file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">readLines</span>(<span class="st">"mom_files/foo.mom"</span>)</a></code></pre></div>
<pre><code>##  [1] "~0001-cPastor_O10VD"  "var Pastor"           "domes cult"          
##  [4] "view VD"              "ind O10"              "size 2.23"           
##  [7] "-0.5000 0.00000"      "-0.4967 0.01035"      "-0.4935 0.02414"     
## [10] "~0001-cPastor_O10VL " "var Pastor"           "domes cult"          
## [13] "view VL"              "ind O10"              "size 2.43"           
## [16] "-0.5000 0.00000"      "-0.4995 0.01018"      "-0.4957 0.02022"     
## [19] "~0001-cIvorra_O11VL " "var Ivorra"           "domes wild"          
## [22] "view VL"              "ind O11"              "size 2.56"           
## [25] "-0.5000 0.00000"      "-0.4985 0.0112"       "-0.4845 0.021"       
## [28] "~0001-cIvorra_O11VD " "var Ivorra"           "domes wild"          
## [31] "view VD"              "ind O11"              "size 2.74"           
## [34] "-0.5000 0.00000"      "-0.4995 0.011"        "-0.49 0.0198"</code></pre>
<p><code><a href="../reference/harvest.html">harvest()</a></code> function will find all the files, when provided containing folder(s) or directly a list of files. A list of files, read as lines, is returned. In most cases, <code>from_*</code> functions will harvest files for you, and a list of folders/files can also be passed directly to <code>from_*</code> functions. See those examples.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/from.html">from_mom</a></span>(<span class="st">"mom_files/foo.mom"</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 7
##   name               coo           var    domes view  ind   size 
##   &lt;chr&gt;              &lt;list&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 0001-cPastor_O10VD &lt;dbl [3 × 2]&gt; Pastor cult  VD    O10   2.23 
## 2 0001-cPastor_O10VL &lt;dbl [3 × 2]&gt; Pastor cult  VL    O10   2.43 
## 3 0001-cIvorra_O11VL &lt;dbl [3 × 2]&gt; Ivorra wild  VL    O11   2.56 
## 4 0001-cIvorra_O11VD &lt;dbl [3 × 2]&gt; Ivorra wild  VD    O11   2.74</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Some equivalents:</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># from_mom("mom_files") # will find all .mom files in "mom_files/"</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># from_mom()            # will find all .mom files in the working </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">                        <span class="co"># directory (I can't myself because I have </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">                        <span class="co"># more than one in my Momit folder)</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co"># harvest(getwd(), pattern="mom$") %&gt;% from_mom() # same</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co"># list.files("mom_files", pattern="mom$", recursive=TRUE, full.names = TRUE) %&gt;% </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#           from_mom()                            # the longest possible command</span></a></code></pre></div>
<p>This list is parsed to a <code>premom_df</code>. Just a <code>data.frame</code> with a custom print method that would help find problems, should you want to develop your own <code>from</code> function.</p>
<p>What we want to import is a <code>.mom</code> file, so we need <code>from_mom</code>. Let’s see what it contains. Note the absence of parentheses, that prints the definition of the function.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">from_mom</a></code></pre></div>
<pre><code>## function(x, ...){
##   if (!is.list(x)){
##     x &lt;- harvest(x, pattern="mom$", ...)
##   }
##   x %&gt;%
##     # here, foreign files can be manipulated
##     # to look like a mom
##     # for mom, they are just parsed
##     parse_mom() %&gt;% momify()
## }
## &lt;bytecode: 0x7f8061fc3910&gt;
## &lt;environment: namespace:Momit&gt;</code></pre>
<p>All <code>from_*</code> functions have the same skeleton. Let’s dissecate its components, first <code>harvest</code>. It is just a convenient wrapper around <code>list.files</code> that will find files (here only files ending with <code>mom</code>). Then, <code>parse_mom</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/harvest.html">harvest</a></span>(<span class="st">"mom_files"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/parse_mom.html">parse_mom</a></span>()</a></code></pre></div>
<pre><code>## # A tibble: 36 x 2
##    x                   what       
##    &lt;chr&gt;               &lt;chr&gt;      
##  1 ~0001-cPastor_O10VD collated   
##  2 var Pastor          cov_categ  
##  3 domes cult          cov_categ  
##  4 view VD             cov_categ  
##  5 ind O10             cov_categ  
##  6 size 2.23           cov_quant  
##  7 -0.5000 0.00000     coordinates
##  8 -0.4967 0.01035     coordinates
##  9 -0.4935 0.02414     coordinates
## 10 ~0001-cPastor_O10VL collated   
## # ... with 26 more rows
## 
## * 4  collated
## * 12 coordinates
## * 16 cov_categ
## * 4  cov_quant
## ✓ all lines tagged</code></pre>
<p>Here we have the parsed <code>data.frame</code>. Apparently everything gone fine. Let’s simulate a wrong syntax in the <code>.mom</code> file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw"><a href="../reference/harvest.html">harvest</a></span>(<span class="st">"mom_files"</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">m[[<span class="dv">1</span>]][<span class="dv">5</span>] &lt;-<span class="st"> "0.5; please crash"</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">m <span class="op">%&gt;%</span><span class="st"> </span>parse_mom</a></code></pre></div>
<pre><code>## # A tibble: 36 x 2
##    x                   what       
##    &lt;chr&gt;               &lt;chr&gt;      
##  1 ~0001-cPastor_O10VD collated   
##  2 var Pastor          cov_categ  
##  3 domes cult          cov_categ  
##  4 view VD             cov_categ  
##  5 0.5; please crash   non_valid  
##  6 size 2.23           cov_quant  
##  7 -0.5000 0.00000     coordinates
##  8 -0.4967 0.01035     coordinates
##  9 -0.4935 0.02414     coordinates
## 10 ~0001-cPastor_O10VL collated   
## # ... with 26 more rows
## 
##  ✗ 1 non valid line(s)</code></pre>
<p>So this function is pretty useful if you’re developping your own <code>from_function</code>. A dedicated vignette will follow.</p>
<p><code>momify</code> then combines this <code>data.frame</code> into a <code>mom_df</code> that you already encountered since we recreated <code>from_mom</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/harvest.html">harvest</a></span>(<span class="st">"mom_files"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/parse_mom.html">parse_mom</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/momify.html">momify</a></span>()</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># equivalent to df &lt;- from_mom("mom_files")</span></a></code></pre></div>
<p>The only pain here is to manually declare all columns classes (see the <code>mutate</code> below). The good news is that it’s pretty cool to have a <code>data.frame</code> to store morphometric data (<a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html">and data as a whole</a>), since you can very easily manipulate them.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<pre><code>## 
## Attachement du package : 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># retain only the first two shapes</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>) </a></code></pre></div>
<pre><code>## # A tibble: 2 x 7
##   name               coo           var    domes view  ind   size 
##   &lt;chr&gt;              &lt;list&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 0001-cPastor_O10VD &lt;dbl [3 × 2]&gt; Pastor cult  VD    O10   2.23 
## 2 0001-cPastor_O10VL &lt;dbl [3 × 2]&gt; Pastor cult  VL    O10   2.43</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># only dorsal views</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(view<span class="op">==</span><span class="st">"VD"</span>) </a></code></pre></div>
<pre><code>## # A tibble: 2 x 7
##   name               coo           var    domes view  ind   size 
##   &lt;chr&gt;              &lt;list&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 0001-cPastor_O10VD &lt;dbl [3 × 2]&gt; Pastor cult  VD    O10   2.23 
## 2 0001-cIvorra_O11VD &lt;dbl [3 × 2]&gt; Ivorra wild  VD    O11   2.74</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># create a new column on the fly</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="co"># and retain only the upper half</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">size2=</span><span class="kw">as.numeric</span>(size)<span class="op">*</span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(size2 <span class="op">&gt;</span><span class="st"> </span><span class="kw">median</span>(size2))</a></code></pre></div>
<pre><code>## # A tibble: 2 x 8
##   name               coo           var    domes view  ind   size  size2
##   &lt;chr&gt;              &lt;list&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 0001-cIvorra_O11VL &lt;dbl [3 × 2]&gt; Ivorra wild  VL    O11   2.56   5.12
## 2 0001-cIvorra_O11VD &lt;dbl [3 × 2]&gt; Ivorra wild  VD    O11   2.74   5.48</code></pre>
<p>And of course you can turn back this <code>data.frame</code> to character thant can later be written to individual or separate <code>.mom</code> files or any other available file format.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/to.html">to_mom</a></span>() <span class="co"># hmmm, that looks like a .mom</span></a></code></pre></div>
<pre><code>## $`0001-cPastor_O10VD`
## [1] "~0001-cPastor_O10VD" "-0.5 0"              "-0.4967 0.01035"    
## [4] "-0.4935 0.02414"     "var Pastor"          "domes cult"         
## [7] "view VD"             "ind O10"             "size 2.23"          
## 
## $`0001-cPastor_O10VL`
## [1] "~0001-cPastor_O10VL" "-0.5 0"              "-0.4995 0.01018"    
## [4] "-0.4957 0.02022"     "var Pastor"          "domes cult"         
## [7] "view VL"             "ind O10"             "size 2.43"          
## 
## $`0001-cIvorra_O11VL`
## [1] "~0001-cIvorra_O11VL" "-0.5 0"              "-0.4985 0.0112"     
## [4] "-0.4845 0.021"       "var Ivorra"          "domes wild"         
## [7] "view VL"             "ind O11"             "size 2.56"          
## 
## $`0001-cIvorra_O11VD`
## [1] "~0001-cIvorra_O11VD" "-0.5 0"              "-0.4995 0.011"      
## [4] "-0.49 0.0198"        "var Ivorra"          "domes wild"         
## [7] "view VD"             "ind O11"             "size 2.74"</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/to.html">to_mom</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/write.html">write_single</a></span>(<span class="st">"plop.mom"</span>) <span class="co"># let's write it into a single file</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">readLines</span>(<span class="st">"plop.mom"</span>)</a></code></pre></div>
<pre><code>##  [1] "~0001-cPastor_O10VD" "-0.5 0"              "-0.4967 0.01035"    
##  [4] "-0.4935 0.02414"     "var Pastor"          "domes cult"         
##  [7] "view VD"             "ind O10"             "size 2.23"          
## [10] "~0001-cPastor_O10VL" "-0.5 0"              "-0.4995 0.01018"    
## [13] "-0.4957 0.02022"     "var Pastor"          "domes cult"         
## [16] "view VL"             "ind O10"             "size 2.43"          
## [19] "~0001-cIvorra_O11VL" "-0.5 0"              "-0.4985 0.0112"     
## [22] "-0.4845 0.021"       "var Ivorra"          "domes wild"         
## [25] "view VL"             "ind O11"             "size 2.56"          
## [28] "~0001-cIvorra_O11VD" "-0.5 0"              "-0.4995 0.011"      
## [31] "-0.49 0.0198"        "var Ivorra"          "domes wild"         
## [34] "view VD"             "ind O11"             "size 2.74"</code></pre>
<p>Yes, we end up with the same information as in <code>foo.mom</code>, only the order of covariates/coordinates changes.</p>
<p>Don’t forget to remove these files and folder!</p>
<pre><code>## [1] TRUE TRUE</code></pre>
</div>
<div id="final-word" class="section level2">
<h2 class="hasAnchor">
<a href="#final-word" class="anchor"></a>Final word</h2>
<ul>
<li>I will add <code>from_*</code> and <code>to_*</code> functions asap in spring 2018.</li>
<li>I also still need to implement missing values handling and units.</li>
<li>All of this is pretty experimental so all comments are welcome.</li>
<li>Please use GitHub issues for bugs/ideas. If you’d like to get in touch privately or send me some exotic data to be included in Momit, you can email me at: <code>bonhomme.vincent@gmail.com</code>.</li>
<li>More to come.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#general-workflow">General workflow</a></li>
      <li><a href="#examples">Examples</a></li>
      <li><a href="#behind-the-curtain">Behind the curtain</a></li>
      <li><a href="#final-word">Final word</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://www.vincentbonhomme.fr">Vincent Bonhomme</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
